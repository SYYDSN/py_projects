<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>基本信息</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/index.css">
</head>
<style>
   
        .div_info p{
            line-height: 6em;
            border-bottom:1px solid #ccc; 
        }
        .div_info p input{
            outline: none;
            border: none;
            height: 100%;
            width: 100%;
        }
        .div_info a{
            width: 45px;
            line-height: 6em;
        }
        .div_info i{
            line-height: 6em;
        }
        .div_info_btn{
            position: relative;
        }
        .div_info_btn p{
            margin-top: 20px;
            text-align: center;
            border: 1px solid #ccc;
            line-height: 2.5em;
            border-radius: 6px;
        }
        .iimg {
            display: inline-block;
            width: 60px;
            height: 6em;
            overflow: hidden;
        }
        .imgs{
            width: 100%;
            height:2.5em;
        }
    </style>
<body>

        <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>行车证
                            <i class="pull-right iimg">
                                    <img class="imgs" id="imgs_one"  src="/static/images/poto.png" alt="">
                            </i>
                        </p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>驾驶证
                            <i class="pull-right iimg">
                                <img class="imgs" id="imgs_two"  src="/static/images/poto.png" alt="">
                        </i>
                    </p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>本人照片
                            <i class="pull-right iimg">
                                <img class="imgs" id="imgs_three" src="/static/images/poto.png" alt="">
                            </i>
                    </p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p id="myModal">性别 <i class="glyphicon glyphicon-menu-right pull-right"></i></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>年龄 <i class="glyphicon glyphicon-menu-right pull-right"></i></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>户籍 <i class="glyphicon glyphicon-menu-right pull-right"></i></p>
                    </div> 
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p><input type="text" placeholder="身份证号"></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p><input type="text" placeholder="邮箱"></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p>家庭住址 <i class="glyphicon glyphicon-menu-right pull-right"></i></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info">
                        <p> 现居地址 <i class="glyphicon glyphicon-menu-right pull-right"></i></p>
                    </div>
                    <div class="col-lg-12 col-md-12 col-xs-12 col-sm-12 div_info div_info_btn">
                       <a id="submt" href="javascript:;"> <p>完成</p></a>
                    </div>                          
                </div>
            </div>

            <!--模态框 -->

                <div class="modal fade" tabindex="-1" role="dialog">
                        <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title">性别</h4>
                            </div>
                            <div class="modal-body">
                            <p><input type="checkbox" name="sex"><span>男</span>   <input type="checkbox" name="sex"> <span>女</span></p>
                            </div>
                            <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                            <button type="button" class="btn btn-primary">确认</button>
                            </div>
                        </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->
        <script src="/static/js/jquery.js"></script>
        <script src="/static/js/bootstrap.min.js"></script>
        <script src="/static/js/wexin.js"></script>
        <script src="/wx/js_sdk_init?debug=0&api=chooseImage uploadImage"></script>
        <script>
            $('#myModal').click(function(){
                $('.modal').modal();
            });

             var imgs_one_num = -1;
             var imgs_two_num = -1;
             var imgs_three_num = -1;
            function take_a_photo($obj){
                wx.chooseImage({
                count: 1, // 默认9
                sizeType: ['original', 'compressed'], // 可以指定是原图还是压缩图，默认二者都有
                sourceType: ['album', 'camera'], // 可以指定来源是相册还是相机，默认二者都有
                success: function (res) {
                var localIds = res.localIds; // 返回选定照片的本地ID列表，localId可以作为img标签的src属性显示图片
                    $obj.attr('src',localIds);
                    if($obj.attr("id")== "imgs_one"){
                           imgs_one_num = localIds;
                       }
                    else if($obj.attr("id")== "imgs_two"){
                            imgs_two_num =localIds;
                    }
                     else if($obj.attr("id")== "imgs_three"){
                            imgs_three_num = localIds;
                    }
//                    syncUpload(localIds);
                }
                });
            }
            $('.iimg').each(function(){
                var $this = $(this);
                $this.click(function(){
                    var img = $this.find("img:first");
                    take_a_photo(img);
                })
            });
//         上传提交信息
            $('#submt').click(function syncUpload(localIds){
                
//                 var localId = localIds.pop();
                
                var localId = [imgs_one_num,imgs_two_num,imgs_three_num];
//                 alert(localId);
                if(imgs_one_num!==-1 && imgs_two_num!==-1 && imgs_three_num!==-1){
                 wx.uploadImage({
                    localId: localId, // 需要上传的图片的本地ID，由chooseImage接口获得
                    isShowProgressTips: 1, // 默认为1，显示进度提示
                    success: function (res) {
                    var serverId = res.serverId; // 返回图片的服务器端ID
                        alert(serverId);
                    }
                    });
                }

//                 alert(localIds);
            });

  wx.error(function(){
            alert(error)
        });

        </script>
</body>
</html>